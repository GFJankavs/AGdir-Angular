<div class="weather">
  <header class="weather__header">
    <a routerLink="/home">
      <img src="assets/horizontal_logo.svg" alt="logo" class="weather__logo">
    </a>
  </header>
  <main class="main">
    <h1>Weather Forecast</h1>
    <div class="main__container">
      <div class="main__left">
        <form  [formGroup]="weatherForm" class="form">
          <div class="input__container">
            <mat-form-field appearance="standard" class="form__input">
              <mat-label>Longitude</mat-label>
              <input matInput type="number" formControlName="longitude" placeholder="Longitude" step="any">
              <mat-hint align="start">Value between <strong>-180</strong> and <strong>180</strong></mat-hint>
              <mat-error *ngIf="weatherForm.get('longitude')?.touched && weatherForm.get('longitude')?.hasError('required')">This field is required.</mat-error>
              <mat-error *ngIf="weatherForm.get('longitude')?.touched && (weatherForm.get('longitude')?.hasError('min') || weatherForm.get('longitude')?.hasError('max'))">Value is not in required range.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="standard" class="form__input">
              <mat-label>Latitude</mat-label>
              <input matInput type="number" formControlName="latitude" placeholder="Latitude" step="any">
              <mat-hint align="start">Value between <strong>-90</strong> and <strong>90</strong></mat-hint>
            </mat-form-field>
          </div>
          <button mat-raised-button color="primary" class="form__button" (click)="getWeatherForecast()">Check forecast</button>
        </form>
      </div>
      <div class="main__right">
        <div class="forecast">
          <mat-spinner [hidden]="!isLoading"></mat-spinner>
          <div class="mat-elevation-z8 table__container" *ngIf="dataSource">
            <div class="table__wrapper">
              <table mat-table [dataSource]="dataSource" matSort>
                <ng-container matColumnDef="time" position>
                  <th mat-header-cell *matHeaderCellDef mat-sort-header="time">Time</th>
                  <td mat-cell *matCellDef="let weather">{{weather.time | date: 'HH:mm' }}</td>
                </ng-container>
                <ng-container matColumnDef="air_temperature">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header="air_temperature">Temperature</th>
                  <td mat-cell *matCellDef="let weather">{{weather.air_temperature}} Â°C</td>
                </ng-container>
                <ng-container matColumnDef="relative_humidity">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header="relative_humidity">Humidity</th>
                  <td mat-cell *matCellDef="let weather">{{weather.relative_humidity}} %</td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                <tr mat-row *matRowDef="let rowData;let even = even;columns: displayedColumns" [ngClass]="{gray: even}"></tr>
              </table>
              <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                             showFirstLastButtons
                             class="table__paginator"
                             aria-label="Select page of periodic elements">
              </mat-paginator>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
